# TrendChef 农庄智能平台 - 产品需求文档 (PRD)

## 1. 项目概述

### 1.1 背景
现有食谱 APP 多为静态数据库，缺乏潮流感和健康指导。用户面临"不知道吃什么"、"不知道现在流行吃什么"、"不知道怎么吃才健康"的多重痛点。我们利用成熟的舆情大数据爬取能力，结合 GenAI 和农庄资源，打造一款"智能推荐 · 健康定制 · 一键创新"的美食助手。

### 1.2 产品定位
**TrendChef 农庄智能平台** 是一款融合热点美食、健康康养、农场直供的 AI 美食助手。

它结合了：
- **GenAI（生成式人工智能）** - 智能生成个性化食谱
- **舆情大数据** - 捕捉全网热点美食趋势
- **健康指导** - 基于个人健康档案的膳食建议
- **农场生态** - 连接本地农场，实现产地直供

### 1.3 核心价值主张 (USP)
1. **智能推荐**：热点标签 + 健康场景标签，双重智能联想
2. **健康定制**：可选设置个人健康档案，获得精准膳食建议
3. **一键创新**：融合舆情数据，自动增加创新元素
4. **农场直供**：小红书式农场发现页，新鲜到家

---

## 2. 用户角色 (User Personas)

- **小白用户 (The Indecisive)**：冰箱里只有几样食材，完全不知道怎么做
- **跟风美食家 (The Trend Hunter)**：喜欢复刻全网爆火的菜肴
- **健康追求者 (The Health-Conscious)**：关注三高、减脂、老年康养等健康场景
- **农场爱好者 (The Farm Enthusiast)**：希望购买新鲜有机的本地农产品

---

## 3. 信息架构 (Information Architecture)

### 底部四Tab结构（方案A1）

1. **首页 (Home)**：美食生成器（主功能）
2. **农场发现 (Farm Discovery)**：小红书式农产品展示（原：发现热点）
3. **食谱书 (Cookbook)**：收藏与历史记录（保持不变）
4. **我的 (Profile)**：额度管理、偏好设置

### Header设计
- 左侧：TrendChef 品牌 Logo
- 右侧：**健康档案**入口按钮（可选设置）

---

## 4. 详细功能需求

### 模块一：智能美食生成器（首页主功能）
**优先级：P0**

#### 4.1 Hero区域
- 标题：AI 美食助手
- 副标题：**智能推荐 · 健康定制 · 一键创新**
- 膳食指南关联提示（已生成时显示）："📊 已关联膳食指南，为你智能优化推荐"

#### 4.2 双标签区设计
**A. 热门联想标签（舆情驱动）**
- 数据来源：实时抓取全网热点（TikTok、小红书、抖音等）
- 示例：空气炸锅、便利店调酒、尹正焖菜、瀑布土豆泥
- 更新频率：每日更新

**B. 健康场景标签（新增）**
- 分类：三高调理、减脂塑形、老年康养、儿童成长、孕期营养、术后恢复
- 逻辑：点击后自动关联用户健康档案（如已设置）
- 样式：健康绿配色，与热点标签视觉区分

#### 4.3 输入与选项
- 食材/菜品输入框
- 配置选项：份量、烹饪时间、忌口

#### 4.4 双按钮操作区（新增）
**A. 生成菜谱（主按钮）**
- 样式：健康绿渐变背景，全宽主按钮
- 功能：标准菜谱生成

**B. 一键创新（新增）**
- 样式：透明背景 + 健康绿边框
- 功能：自动融入创新元素
  - 融入网红元素
  - 结合健康理念
  - 添加创意摆盘
  - 采用新式烹饪方法
- 交互：点击后显示随机创新提示，1秒后自动生成

#### 4.5 膳食指南引导（新增）
- 位置：生成器底部
- 样式：虚线边框，淡绿背景
- 文案："💡 还没生成膳食指南？立即生成 →"
- 交互：点击打开膳食指南生成弹窗
- 显示逻辑：仅未生成时显示

#### 4.6 生成逻辑（RAG + 膳食指南）
- 基础：检索150万份菜谱数据库
- 热点加权：融入舆情热点元素
- **健康优化（新增）**：
  - 若用户已生成膳食指南，自动调整食材比例和推荐方向
  - 优先推荐符合膳食指南的食材和烹饪方式
  - 在Tips中添加健康建议，标注"✓ 符合您的膳食指南"

---

### 模块二：个性化膳食指南生成系统（新增）
**优先级：P0**

> 基于《中国居民膳食指南》，为用户生成专属的个性化膳食建议报告

#### 4.1 入口设计
- **位置**：Header右侧按钮
- **图标**：📋 我的膳食指南
- **样式**：健康绿边框徽章

#### 4.1.2 首次访问引导（新增）
- **触发时机**：用户首次访问首页（无本地记录时）
- **形式**：页面居中欢迎弹窗
- **内容**：
  - 标题："欢迎来到 TrendChef 农庄智能平台"
  - 文案："我是您的专属AI营养师。基于《中国居民膳食指南》，为您定制个性化饮食方案。"
- **交互**：
  - [✨ 立即生成我的膳食指南] -> 打开生成弹窗
  - [先看一看] -> 关闭弹窗

#### 4.2 生成界面设计

**A. 输入区域**
```
弹窗标题：生成我的个性化膳食指南

输入提示：
"请描述您的基本信息和健康需求，例如：
• 年龄、性别、身高、体重
• 健康状况（如：高血压、高血脂、糖尿病等）
• 生活方式（如：久坐、运动频率）
• 特殊需求（如：减脂、增肌、孕期、哺乳期等）
• 饮食习惯和禁忌

示例：我是45岁男性，身高175cm，体重85kg，有轻度高血压和高血脂，
平时工作压力大久坐，想通过饮食调理改善健康状况。"

[大文本输入框 - textarea，至少5行]

[生成我的膳食指南] 按钮
```

**B. 生成逻辑**
1. 用户点击"生成我的膳食指南"
2. 显示加载动画（"AI正在结合《中国居民膳食指南》为您生成..."）
3. 后端调用AI API：
   - 输入：用户描述 + 《中国居民膳食指南》知识库
   - Prompt示例：
     ```
     基于《中国居民膳食指南（2022版）》，为以下用户生成个性化膳食指南：
     
     用户信息：{用户输入}
     
     请生成包含以下内容的报告：
     1. 每日能量摄入建议
     2. 食物种类与配比
     3. 三大营养素比例
     4. 针对性健康建议
     5. 饮食禁忌
     6. 推荐食材清单
     ```
4. AI生成文本报告

#### 4.3 报告展示与管理

**A. 报告内容结构（示例）**
```markdown
# 张三的个性化膳食指南
*生成于 2025-12-23*

## 一、基本信息评估
- 年龄/性别：45岁/男性
- 身体指标：BMI 27.8（超重）
- 健康状况：轻度高血压、高血脂
- 生活方式：久坐为主，运动不足

## 二、每日能量及营养素建议
- **能量摄入**：1800-2000千卡/天
- **蛋白质**：90-100克/天（占总能量18-20%）
- **脂肪**：50-60克/天（占总能量25-30%）
- **碳水化合物**：220-250克/天（占总能量50-55%）

## 三、食物种类与配比
### 谷薯类：250-300克/天
- 全谷物和杂豆类占1/3以上
- 推荐：糙米、燕麦、全麦面包、红薯

### 蔬菜类：500克以上/天
- 深色蔬菜占一半
- 推荐：芹菜、菠菜、西兰花、胡萝卜、紫甘蓝

### 水果类：200-350克/天
- 推荐：苹果、香蕉、柑橘、猕猴桃

### 肉蛋类：120-150克/天
- 优先鱼虾禽类，限制红肉
- 推荐：三文鱼、鸡胸肉、鸡蛋（每日1个）

### 奶豆类：
- 奶类300-500毫升/天
- 大豆及豆制品15-25克/天

## 四、针对性健康建议
### 高血压管理
✓ 每日食盐<5克
✓ 增加富含钾的食物（芹菜、菠菜、香蕉、土豆）
✓ 限制咖啡因摄入

### 高血脂管理
✓ 每日烹调油<25克
✓ 限制胆固醇（每日<300mg）
✓ 增加优质脂肪（深海鱼、坚果）
✓ 多摄入膳食纤维（燕麦、豆类）

## 五、饮食禁忌
× 高盐食物：腌制品、火腿、咸菜
× 高脂食物：肥肉、动物内脏、油炸食品
× 高糖食物：甜饮料、蛋糕、糖果

## 六、一周食材采购清单
[谷物] 糙米、燕麦、全麦面包、红薯
[蔬菜] 芹菜、菠菜、西兰花、番茄、黄瓜
[水果] 苹果、香蕉、橙子
[蛋白] 鸡胸肉、鱼类、鸡蛋、豆腐
[其他] 低脂牛奶、坚果（适量）

---
*本指南基于《中国居民膳食指南（2022版）》生成，仅供参考，如有疾病请咨询医生*
```

**B. 报告操作**
- 显示完整报告（可滚动查看）
- 按钮：
  - [重新编辑] - 返回输入界面修改
  - [保存到我的档案] - 保存报告
  - [关闭]

#### 4.4 报告存储与应用

**A. 存储位置**
- 可选方案1：在"食谱书"Tab下新增"我的膳食指南"section
- 可选方案2：将"食谱书"改名为"我的档案"，包含：膳食指南 + 收藏食谱

**B. 应用场景**
1. **生成菜谱时自动关联**
   - 若用户已保存膳食指南，生成菜谱时自动参考
   - 优先推荐符合指南的食材和烹饪方式
   - 在菜谱Tips中标注："✓ 符合您的膳食指南"

2. **首页提示**
   - 已保存：显示"📊 已关联膳食指南，为您智能优化推荐"
   - 未保存：显示"💡 还没生成膳食指南？立即生成 →"

#### 4.5 技术实现要点

**前端状态管理：**
```javascript
state = {
    dietaryGuideline: {
        userInput: '',        // 用户输入的描述
        report: '',           // AI生成的报告内容
        createdAt: '',        // 生成时间
        hasSaved: false       // 是否已保存
    }
}
```

**后端API需求：**
- 端点：`POST /api/generate-dietary-guideline`
- 请求体：
  ```json
  {
    "userDescription": "用户输入的文本",
    "knowledgeBase": "中国居民膳食指南"
  }
  ```
- 响应：
  ```json
  {
    "report": "markdown格式的报告全文",
    "generatedAt": "2025-12-23T12:00:00Z"
  }
  ```

---

### 模块三：农场发现页（改版发现页）
**优先级：P0**

#### 4.1 页面改造
- 标题：**农场发现**（原：发现热点）
- 副标题：**新鲜直供 · 产地直达**（原：全网即时美食趋势）

#### 4.2 分类Tab改造
| 原Tab | 新Tab |
|-------|-------|
| 全网热搜 | 当季蔬菜 |
| 低脂黑科技 | 有机特供 |
| 极致省钱 | 农场活动 |
| 当季必吃 | 采摘预告 |

#### 4.3 内容卡片
**展示元素：**
- 农产品图片
- 产品名称（如：新鲜有机白萝卜）
- 状态标签（如：今日上新、热卖中、限量采摘）
- 来源标签（如：农场直供、有机认证）

**交互：**
- 点击卡片查看详情
- 支持图片预览

#### 4.4 二维码购买入口（新增，前端预留）
- 位置：发现页底部
- 样式：横向卡片布局
- 内容：
  - 左侧：📱 图标
  - 中间：标题"扫码购买新鲜农产品" + 副标题"产地直送，新鲜到家"
  - 右侧：购买按钮
- 功能：前端预留，待后端接入

#### 4.5 数据来源（未来）
- 农场后台上传产品信息
- 实时库存同步
- 采摘预告发布

---

### 模块四：食谱书（保持不变）
**优先级：P1**

- 功能：收藏菜谱、生成历史记录
- 保持原有设计和功能
- **可选增强**：增加"已关联健康档案"标识

---

### 模块五：外部链接解析
**优先级：P1**

保持原有设计：
- 用户粘贴链接（抖音/TikTok/小红书/公众号）
- 后端爬虫获取文本/字幕
- LLM 总结、去噪、格式化
- 输出为标准食谱卡片

---

## 5. 设计规范

### 5.1 配色方案
| 颜色项 | 颜色值 | 用途 |
|-------|-------|------|
| 主色调 | #52c41a | 健康绿，按钮、边框、强调 |
| 辅助色 | #73d13d | 渐变、hover状态 |
| 深色调 | #389e0d | 深色按钮、阴影 |
| 背景 | #000000 | 主背景 |
| 卡片背景 | #1a1a1a | 卡片、组件背景 |

### 5.2 品牌标识
- 品牌名：TrendChef（保持不变）
- Logo图标：🍳
- Slogan：智能推荐 · 健康定制 · 一键创新

---

## 6. 技术实现要点

### 6.1 前端状态管理
```javascript
state = {
    healthProfile: {
        goal: '',           // 健康目标
        preferences: [],    // 饮食偏好
        familySize: '2',   // 家庭人数
        isSet: false       // 是否已设置
    }
}
```

### 6.2 关键交互逻辑
- 健康档案弹窗：点击Header按钮/引导提示打开
- 标签多选：点击toggle active状态
- 一键创新：显示随机提示 → 1秒后自动生成
- UI状态切换：根据档案设置状态显示/隐藏提示

---

## 7. 迭代规划

### V1.0（已完成） ✅
- 美食生成器（热点标签）
- 发现热点页
- 食谱书
- 个人中心

### V1.5（当前版本） ✅
- 新增健康档案系统
- 新增健康场景标签
- 新增一键创新功能
- 发现页改为农场发现
- 二维码购买入口（前端预留）

### V2.0（规划中）
- 后端健康档案数据库
- 农场产品后台管理系统
- 真实二维码购买功能
- 采摘预约系统

### V3.0（未来规划）
- 基地盲盒挑战（扫码识别蔬菜箱，生成7天消耗计划）
- 智能库存调整（根据农场库存动态推荐菜谱）
- 食谱一键买（匹配到基地产物显示购买按钮）
- 云认养功能（云监工蔬菜生长过程）

---

## 8. 设计决策记录

### 决策1：首屏布局（方案A1）
**问题：** 美食生成 vs 健康档案，谁是首屏主功能？

**结论：** 美食生成为主，健康档案为辅助入口
- 用户核心需求是"今天吃什么"（高频）
- 健康档案是数据基础（低频设置）
- 健康档案入口放在Header右侧
- 首页底部保留引导提示

### 决策2：Tab结构
**问题：** 食谱书是否改为健康档案中心？

**结论：** 保持食谱书不变
- 食谱书是高频功能（查看收藏、历史）
- 健康档案是低频设置，放Header更合理
- 保持底部导航的功能清晰度

### 决策3：配色方案
- 从薄荷绿(#00FF9D)调整为健康绿(#52c41a)
- 更符合健康康养主题
- 视觉更温暖、亲和

---

## 9. 验证清单

- [x] Header显示TrendChef品牌和健康档案按钮
- [x] 首页副标题显示"智能推荐 · 健康定制 · 一键创新"
- [x] 有热门标签区和健康场景标签区
- [x] 有"生成菜谱"和"一键创新"两个按钮
- [x] 健康档案弹窗正常打开、保存、关闭
- [x] 农场发现页Tab切换正常
- [x] 二维码购买入口显示
- [x] 配色更新为健康绿
- [x] 底部导航Tab可点击切换
